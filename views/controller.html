<!DOCTYPE html>
<html>
<head>
  <title>Birds</title>
  <!-- http://furtive.co/ -->
  <link rel="stylesheet" type="text/css" href="/bower/furtive/css/furtive.min.css">
</head>
<body>
  <div class="measure p2">
    <h1>▶ /flock/{{params.id}}</h1>


    <!-- <form method="post">
      <div class="grd">
        <div class="grd-row">
          <div class="grd-row-col-2-6 p1">

            <label>
              bird
              <input name="bird">
            </label>

          </div>

          <div class="grd-row-col-2-6 p1">

            <label>
              tone
              <input name="tone_freq">
            </label>

            <label>
              length
              <input name="tone_length">
            </label>

          </div>
        </div>
      </div>
    </form> -->

    <div id="tracks"></div>

    <!-- <template repeat="{{bird in birds}}">
      <h4>{{bird}}</h4>
      <p><a href="#" class="btn btn--blue">▶</a></p>
      <hr />
    </template> -->

    <script type="text/javascript" src="/bower/reqwest/reqwest.js"></script>
    <script type="text/javascript" src="/bower/ractive/ractive.js"></script>

    <script type="text/javascript">

      var ractive;

      reqwest('/_track.html')
      .then(function(template){
        ractive = new Ractive({
          el: '#tracks',
          template: template,
          data: {
            tracks: [{type: "bird", data: "XC99072", offset: "0", frequency: "15"}]
          }
        });

        ractive.on('add-track', function(){
          ractive.push('tracks', {})
        })

        ractive.on('submit', function(){
          var tracks = ractive.get('tracks');

          reqwest({
            url: document.location.pathname,
            method:'post', 
            data: {
              tracks: tracks
            }
          })
        })

      })

    </script>

  </div>
</body>
</html>